#!/usr/bin/env ruby

require "fixbraces"
require "trollop"

opts = Trollop::options do
  version "v#{Fixbraces::VERSION}"

  banner <<BANN
Puts the opening brace on the same line as the opening clause for Objective-C (.h and .m) files.

Usage:
  fixbraces [options] files ...

where [options] are:
BANN

end

source_files = []

ARGV.each do |f|
  f = File.expand_path f
  extension = File.extname f

  if File.directory? f
    source_files.push Dir.glob File.join(f, "**/*.{h,m}")
  elsif File.file? f and (extension == ".h" or extension == ".m")
    source_files.push f
  end

end

source_files.flatten.each do |f|
  Fixbraces.process_file f
end
